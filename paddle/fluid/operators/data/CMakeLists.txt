include(operators)
if(WITH_UNITY_BUILD)
    # Load Unity Build rules for operators in paddle/fluid/operators/data/
    include(unity_build_rule.cmake)
endif()

cc_library(pipeline SRCS pipeline.cc DEPS parallel_executor simple_threadpool scope)
op_library(dataloader_op SRCS dataloader_op.cc dataloader_op.cu.cc DEPS pipeline ${OP_HEADER_DEPS})

cc_library(map_runner SRCS map_runner.cc DEPS parallel_executor simple_threadpool scope)
op_library(map_op SRCS map_op.cc map_op.cu.cc DEPS map_runner ${OP_HEADER_DEPS})

cc_library(nvjpeg_decoder SRCS nvjpeg_decoder.cc DEPS ${OP_HEADER_DEPS})
op_library(batch_decode_op SRCS batch_decode_op.cc batch_decode_op.cu DEPS nvjpeg_decoder ${OP_HEADER_DEPS})

# register_operators()

# TODO: add test here
# cc_test(xxx SRCS xxx DEPS xxx)
