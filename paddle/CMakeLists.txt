if(NOT WITH_FLUID_ONLY)
  add_subdirectory(cuda)
  add_subdirectory(function)
  add_subdirectory(utils)
  add_subdirectory(math)
  add_subdirectory(gserver)
  add_subdirectory(parameter)

  if(MOBILE_INFERENCE)
    add_subdirectory(capi)
  else()
    add_subdirectory(pserver)
    add_subdirectory(trainer)
    add_subdirectory(scripts)

    if(WITH_C_API)
      add_subdirectory(capi)
    endif()

    if(WITH_SWIG_PY)
      add_subdirectory(api)
    endif()
  endif()
endif()

add_subdirectory(testing)
if(NOT MOBILE_INFERENCE AND NOT RPI AND NOT WITH_C_API)
  add_subdirectory(fluid)
endif()
