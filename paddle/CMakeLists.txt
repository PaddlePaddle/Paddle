add_subdirectory(cuda)
add_subdirectory(function)
add_subdirectory(utils)
add_subdirectory(math)
add_subdirectory(gserver)
add_subdirectory(parameter)
add_subdirectory(testing)

if(MOBILE_INFERENCE)
  add_subdirectory(capi)
else()
  add_subdirectory(pserver)
  add_subdirectory(trainer)
  add_subdirectory(scripts)

  if(WITH_C_API)
    add_subdirectory(capi)
  endif()

  if(NOT ANDROID AND NOT IOS)
    add_subdirectory(fluid)
  endif()

  if(WITH_SWIG_PY)
    add_subdirectory(api)
  endif()
endif()
