# This file is generated by ${PADDLE_ROOT}/tools/gen_ut_cmakelists.py.
# Please don't modify this file manually.
# If you need to change unittests in this file, please modify testslist.csv in the current directory
# and then run the command `python3 ${PADDLE_ROOT}/tools/gen_ut_cmakelists.py -f ${CURRENT_DIRECTORY}/testslist.csv`
set(LOCAL_ALL_ARCH ON)
set(LOCAL_ALL_PLAT ON)
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND LOCAL_ALL_PLAT)
  py_test_modules(
    test_fleet_sharding_meta_optimizer MODULES
    test_fleet_sharding_meta_optimizer ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_fleet_sharding_meta_optimizer
                       PROPERTIES TIMEOUT "350" RUN_SERIAL 1)
endif()
if(LOCAL_ALL_ARCH AND (LINUX OR WIN32))
  py_test_modules(
    test_fleet_static_mp_layers MODULES test_fleet_static_mp_layers ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_fleet_static_mp_layers PROPERTIES RUN_SERIAL 1)
endif()
if(WITH_DGC)
  if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
    py_test_modules(
      test_dgc_op MODULES test_dgc_op ENVS
      "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
    set_tests_properties(test_dgc_op PROPERTIES RUN_SERIAL 1)
  endif()
endif()
if(WITH_DGC)
  if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
    py_test_modules(
      test_dgc_optimizer MODULES test_dgc_optimizer ENVS
      "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
    set_tests_properties(test_dgc_optimizer PROPERTIES RUN_SERIAL 1)
  endif()
endif()
if(WITH_NCCL)
  if((WITH_GPU) AND LOCAL_ALL_PLAT)
    bash_test_modules(
      test_parallel_margin_cross_entropy
      START_BASH
      ../../dist_test.sh
      LABELS
      "RUN_TYPE=DIST"
      ENVS
      "PADDLE_DIST_UT_PORT=21200;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
    )
    set_tests_properties(test_parallel_margin_cross_entropy
                         PROPERTIES TIMEOUT "120" RUN_SERIAL 1)
  endif()
endif()
if(WITH_NCCL)
  if((WITH_GPU) AND LOCAL_ALL_PLAT)
    bash_test_modules(
      test_dygraph_sharding_stage3
      START_BASH
      ../../dist_test.sh
      LABELS
      "RUN_TYPE=DIST"
      ENVS
      "PADDLE_DIST_UT_PORT=21202;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
    )
    set_tests_properties(test_dygraph_sharding_stage3 PROPERTIES TIMEOUT "350"
                                                                 RUN_SERIAL 1)
  endif()
endif()
if(WITH_NCCL)
  if(${NCCL_VERSION} VERSION_GREATER_EQUAL 2212)
    if((WITH_GPU) AND LOCAL_ALL_PLAT)
      bash_test_modules(
        test_parallel_dygraph_transformer
        START_BASH
        ../../dist_test.sh
        LABELS
        "RUN_TYPE=DIST"
        ENVS
        "PADDLE_DIST_UT_PORT=21204;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
      )
      set_tests_properties(test_parallel_dygraph_transformer
                           PROPERTIES RUN_SERIAL 1)
    endif()
  endif()
endif()
if((WITH_ROCM) AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_transformer
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21206;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_transformer PROPERTIES RUN_SERIAL
                                                                    1)
endif()
if(LOCAL_ALL_ARCH AND (LINUX OR WIN32))
  py_test_modules(
    test_fleet_fp16_allreduce_meta_optimizer MODULES
    test_fleet_fp16_allreduce_meta_optimizer ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_fleet_fp16_allreduce_meta_optimizer
                       PROPERTIES RUN_SERIAL 1)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_rnn_dp
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21208;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_rnn_dp PROPERTIES RUN_SERIAL 1)
endif()
if(WITH_NCCL)
  if((WITH_GPU) AND LOCAL_ALL_PLAT)
    bash_test_modules(
      test_parallel_dygraph_mp_layers
      START_BASH
      ../../dist_test.sh
      LABELS
      "RUN_TYPE=DIST"
      ENVS
      "PADDLE_DIST_UT_PORT=21210;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
    )
    set_tests_properties(test_parallel_dygraph_mp_layers
                         PROPERTIES TIMEOUT "120" RUN_SERIAL 1)
  endif()
endif()
if(LOCAL_ALL_ARCH AND (LINUX OR APPLE))
  bash_test_modules(
    test_tcp_store
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21212;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_tcp_store PROPERTIES RUN_SERIAL 1)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_dygraph_sharding_stage3_for_eager
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21214;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_dygraph_sharding_stage3_for_eager
                       PROPERTIES TIMEOUT "350" RUN_SERIAL 1)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_fleet_graph_execution_meta_optimizer
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21216;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_graph_execution_meta_optimizer
                       PROPERTIES RUN_SERIAL 1)
endif()
if(WITH_NCCL)
  if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
    py_test_modules(
      test_communicator_half_async
      MODULES
      test_communicator_half_async
      ENVS
      "FLAGS_communicator_send_queue_size=1;FLAGS_communicator_max_merge_var_num=1;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
    )
    set_tests_properties(test_communicator_half_async PROPERTIES TIMEOUT "120"
                                                                 RUN_SERIAL 1)
  endif()
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND LOCAL_ALL_PLAT)
  py_test_modules(
    test_fleet_graph_executor MODULES test_fleet_graph_executor ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_fleet_graph_executor PROPERTIES RUN_SERIAL 1)
endif()
if((WITH_GPU) AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_pipeline_parallel
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21218;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_pipeline_parallel
                       PROPERTIES TIMEOUT "500" RUN_SERIAL 1)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND (LINUX))
  py_test_modules(
    test_fleet_localsgd_meta_optimizer MODULES
    test_fleet_localsgd_meta_optimizer ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_fleet_localsgd_meta_optimizer PROPERTIES RUN_SERIAL
                                                                     1)
endif()
if(WITH_NCCL)
  if((WITH_GPU) AND LOCAL_ALL_PLAT)
    bash_test_modules(
      test_parallel_class_center_sample
      START_BASH
      ../../dist_test.sh
      LABELS
      "RUN_TYPE=DIST"
      ENVS
      "PADDLE_DIST_UT_PORT=21220;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
    )
    set_tests_properties(test_parallel_class_center_sample
                         PROPERTIES TIMEOUT "120" RUN_SERIAL 1)
  endif()
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_pipeline
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21222;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_pipeline PROPERTIES TIMEOUT "120" RUN_SERIAL 1)
endif()
if(LOCAL_ALL_ARCH AND (LINUX OR APPLE))
  py_test_modules(
    test_fleet_utils MODULES test_fleet_utils ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_fleet_utils PROPERTIES TIMEOUT "120" RUN_SERIAL 1)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_static_model_parallel
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21224;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_static_model_parallel PROPERTIES TIMEOUT "240"
                                                             RUN_SERIAL 1)
endif()
if(WITH_NCCL)
  if((WITH_GPU) AND LOCAL_ALL_PLAT)
    bash_test_modules(
      test_parallel_dygraph_no_sync
      START_BASH
      ../../dist_test.sh
      LABELS
      "RUN_TYPE=DIST"
      ENVS
      "PADDLE_DIST_UT_PORT=21226;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
    )
    set_tests_properties(test_parallel_dygraph_no_sync PROPERTIES TIMEOUT "300"
                                                                  RUN_SERIAL 1)
  endif()
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_dygraph_sharding_stage2
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21228;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_dygraph_sharding_stage2 PROPERTIES TIMEOUT "200"
                                                               RUN_SERIAL 1)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_control_flow
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21230;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_control_flow
                       PROPERTIES TIMEOUT "350" RUN_SERIAL 1)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_fleet_lars_meta_optimizer
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21232;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_lars_meta_optimizer PROPERTIES RUN_SERIAL 1)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_hybrid_parallel_inference_helper
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21234;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_hybrid_parallel_inference_helper
                       PROPERTIES TIMEOUT "120" RUN_SERIAL 1)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  py_test_modules(
    test_fleet_rolemaker_new MODULES test_fleet_rolemaker_new ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_fleet_rolemaker_new PROPERTIES RUN_SERIAL 1)
endif()
if((WITH_GPU OR WITH_ROCM) AND (LINUX OR WIN32))
  py_test_modules(
    test_dist_mnist_gradient_merge MODULES test_dist_mnist_gradient_merge ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_dist_mnist_gradient_merge PROPERTIES TIMEOUT "360"
                                                                 RUN_SERIAL 1)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  py_test_modules(
    test_recv_save_op MODULES test_recv_save_op ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_recv_save_op PROPERTIES RUN_SERIAL 1)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  py_test_modules(
    test_communicator_sync
    MODULES
    test_communicator_sync
    ENVS
    "FLAGS_communicator_send_queue_size=1;FLAGS_communicator_max_merge_var_num=1;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_communicator_sync PROPERTIES RUN_SERIAL 1)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_fleet_pipeline_meta_optimizer
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21236;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_pipeline_meta_optimizer PROPERTIES RUN_SERIAL
                                                                     1)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND LOCAL_ALL_PLAT)
  py_test_modules(
    test_fleet_gradient_merge_meta_optimizer MODULES
    test_fleet_gradient_merge_meta_optimizer ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_fleet_gradient_merge_meta_optimizer
                       PROPERTIES RUN_SERIAL 1)
endif()
if(LOCAL_ALL_ARCH AND (LINUX OR WIN32))
  py_test_modules(
    test_fleet_amp_init MODULES test_fleet_amp_init ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_fleet_amp_init PROPERTIES RUN_SERIAL 1)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_dygraph_sharding_optimizer_stage2
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21238;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_dygraph_sharding_optimizer_stage2
                       PROPERTIES TIMEOUT "120" RUN_SERIAL 1)
endif()
if(LOCAL_ALL_ARCH AND (LINUX OR WIN32))
  py_test_modules(
    test_fleet_meta_optimizer_base MODULES test_fleet_meta_optimizer_base ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_fleet_meta_optimizer_base PROPERTIES RUN_SERIAL 1)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_fleet_raw_program_meta_optimizer
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21240;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_raw_program_meta_optimizer
                       PROPERTIES RUN_SERIAL 1)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_sharding_parallel
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21242;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_sharding_parallel
                       PROPERTIES TIMEOUT "120" RUN_SERIAL 1)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_tensor_parallel
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21244;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_tensor_parallel
                       PROPERTIES TIMEOUT "200" RUN_SERIAL 1)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_dygraph_group_sharded_api_for_eager
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21246;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_dygraph_group_sharded_api_for_eager
                       PROPERTIES TIMEOUT "120" RUN_SERIAL 1)
endif()
if(LOCAL_ALL_ARCH AND (LINUX OR WIN32))
  py_test_modules(
    test_fleet_distributed_strategy MODULES test_fleet_distributed_strategy
    ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_fleet_distributed_strategy PROPERTIES RUN_SERIAL 1)
endif()
if(WITH_DGC)
  if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
    py_test_modules(
      test_fleet_dgc_meta_optimizer MODULES test_fleet_dgc_meta_optimizer ENVS
      "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
    set_tests_properties(test_fleet_dgc_meta_optimizer PROPERTIES RUN_SERIAL 1)
  endif()
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_unused_variables
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21248;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_unused_variables
                       PROPERTIES TIMEOUT "350" RUN_SERIAL 1)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND (LINUX))
  py_test_modules(
    test_fleet_lamb_meta_optimizer MODULES test_fleet_lamb_meta_optimizer ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_fleet_lamb_meta_optimizer PROPERTIES RUN_SERIAL 1)
endif()
if(WITH_DGC)
  if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
    py_test_modules(
      test_dgc_momentum_op MODULES test_dgc_momentum_op ENVS
      "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
    set_tests_properties(test_dgc_momentum_op PROPERTIES RUN_SERIAL 1)
  endif()
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_no_sync_gradient_check
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21250;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_no_sync_gradient_check
                       PROPERTIES TIMEOUT "60" RUN_SERIAL 1)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_fleet_pipeline_meta_optimizer_with_recompute
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21252;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_pipeline_meta_optimizer_with_recompute
                       PROPERTIES RUN_SERIAL 1)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND (WIN32 OR LINUX))
  py_test_modules(
    test_fleet_hybrid_meta_optimizer MODULES test_fleet_hybrid_meta_optimizer
    ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_fleet_hybrid_meta_optimizer PROPERTIES RUN_SERIAL 1)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_qat
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21254;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_qat PROPERTIES TIMEOUT "120"
                                                            RUN_SERIAL 1)
endif()
if(WITH_NCCL)
  if(${NCCL_VERSION} VERSION_GREATER_EQUAL 2212)
    if((WITH_GPU) AND LOCAL_ALL_PLAT)
      bash_test_modules(
        test_parallel_dygraph_sparse_embedding
        START_BASH
        ../../dist_test.sh
        LABELS
        "RUN_TYPE=DIST"
        ENVS
        "PADDLE_DIST_UT_PORT=21256;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
      )
      set_tests_properties(test_parallel_dygraph_sparse_embedding
                           PROPERTIES TIMEOUT "200" RUN_SERIAL 1)
    endif()
  endif()
endif()
if((WITH_ROCM) AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_sparse_embedding
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21258;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_sparse_embedding
                       PROPERTIES TIMEOUT "200" RUN_SERIAL 1)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND LOCAL_ALL_PLAT)
  py_test_modules(
    test_fleet_amp_meta_optimizer MODULES test_fleet_amp_meta_optimizer ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_fleet_amp_meta_optimizer PROPERTIES RUN_SERIAL 1)
endif()
if(WITH_NCCL)
  if(${NCCL_VERSION} VERSION_GREATER_EQUAL 2212)
    if((WITH_GPU) AND LOCAL_ALL_PLAT)
      bash_test_modules(
        test_parallel_dygraph_sparse_embedding_over_height
        START_BASH
        ../../dist_test.sh
        LABELS
        "RUN_TYPE=DIST"
        ENVS
        "PADDLE_DIST_UT_PORT=21260;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
      )
      set_tests_properties(test_parallel_dygraph_sparse_embedding_over_height
                           PROPERTIES TIMEOUT "150" RUN_SERIAL 1)
    endif()
  endif()
endif()
if((WITH_ROCM) AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_sparse_embedding_over_height
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21262;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_sparse_embedding_over_height
                       PROPERTIES TIMEOUT "350" RUN_SERIAL 1)
endif()
if(LOCAL_ALL_ARCH AND (LINUX OR APPLE))
  py_test_modules(
    test_distributed_strategy MODULES test_distributed_strategy ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_distributed_strategy PROPERTIES RUN_SERIAL 1)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_auto_parallel_parallelizer
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21264;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_auto_parallel_parallelizer PROPERTIES TIMEOUT "120"
                                                                  RUN_SERIAL 1)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND (LINUX OR WIN32))
  py_test_modules(
    test_fleet_recompute_meta_optimizer MODULES
    test_fleet_recompute_meta_optimizer ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_fleet_recompute_meta_optimizer PROPERTIES RUN_SERIAL
                                                                      1)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_dygraph_group_sharded_api
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21266;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_dygraph_group_sharded_api PROPERTIES TIMEOUT "120"
                                                                 RUN_SERIAL 1)
endif()
if(LOCAL_ALL_ARCH AND (LINUX OR WIN32))
  py_test_modules(
    test_fleet_private_function MODULES test_fleet_private_function ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_fleet_private_function PROPERTIES RUN_SERIAL 1)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_new_group
    START_BASH
    test_new_group.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21268;http_proxy=;https_proxy=")
  set_tests_properties(test_new_group PROPERTIES RUN_SERIAL 1)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND (LINUX))
  bash_test_modules(
    test_c_comm_init_op
    START_BASH
    test_c_comm_init_op.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21270;http_proxy=;https_proxy=")
  set_tests_properties(test_c_comm_init_op PROPERTIES TIMEOUT "120" RUN_SERIAL
                                                      1)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_ir_pass_pipeline
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21272;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_ir_pass_pipeline PROPERTIES TIMEOUT "120"
                                                        RUN_SERIAL 1)
endif()
if((WITH_GPU OR WITH_ROCM) AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_mnist
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21274;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_mnist PROPERTIES TIMEOUT "200"
                                                              RUN_SERIAL 1)
endif()
if((WITH_GPU OR WITH_ROCM) AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_se_resnext
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21276;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_se_resnext
                       PROPERTIES TIMEOUT "200" RUN_SERIAL 1)
endif()
if((WITH_GPU OR WITH_ROCM) AND LOCAL_ALL_PLAT)
  py_test_modules(
    test_parallel_dygraph_sync_batch_norm MODULES
    test_parallel_dygraph_sync_batch_norm ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_parallel_dygraph_sync_batch_norm
                       PROPERTIES TIMEOUT "120" RUN_SERIAL 1)
endif()
if(WITH_NCCL)
  if((WITH_GPU) AND LOCAL_ALL_PLAT)
    bash_test_modules(
      test_parallel_dygraph_dataparallel
      START_BASH
      ../../dist_test.sh
      LABELS
      "RUN_TYPE=DIST"
      ENVS
      "PADDLE_DIST_UT_PORT=21278;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
    )
    set_tests_properties(test_parallel_dygraph_dataparallel
                         PROPERTIES TIMEOUT "120" RUN_SERIAL 1)
  endif()
endif()
if(NOT WITH_NCCL OR NOT WITH_GPU)
  if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
    bash_test_modules(
      test_parallel_dygraph_dataparallel
      START_BASH
      ../../dist_test.sh
      LABELS
      "RUN_TYPE=DIST"
      ENVS
      "PADDLE_DIST_UT_PORT=21280;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
    )
    set_tests_properties(test_parallel_dygraph_dataparallel
                         PROPERTIES RUN_SERIAL 1)
  endif()
endif()
if((WITH_GPU OR WITH_ROCM) AND LOCAL_ALL_PLAT)
  py_test_modules(
    test_imperative_auto_mixed_precision MODULES
    test_imperative_auto_mixed_precision ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_imperative_auto_mixed_precision
                       PROPERTIES TIMEOUT "300" RUN_SERIAL 1)
endif()
if((WITH_GPU OR WITH_ROCM) AND LOCAL_ALL_PLAT)
  py_test_modules(
    test_imperative_auto_mixed_precision_for_eager MODULES
    test_imperative_auto_mixed_precision_for_eager ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_imperative_auto_mixed_precision_for_eager
                       PROPERTIES TIMEOUT "300" RUN_SERIAL 1)
endif()
if((WITH_GPU OR WITH_ROCM) AND LOCAL_ALL_PLAT)
  py_test_modules(
    test_mixed_precision MODULES test_mixed_precision ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_mixed_precision PROPERTIES RUN_SERIAL 1)
endif()
if((WITH_GPU OR WITH_ROCM) AND LOCAL_ALL_PLAT)
  py_test_modules(
    test_dygraph_recompute MODULES test_dygraph_recompute ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_dygraph_recompute PROPERTIES RUN_SERIAL 1)
endif()
if((WITH_GPU OR WITH_ROCM) AND LOCAL_ALL_PLAT)
  py_test_modules(
    test_dygraph_recompute_for_eager MODULES test_dygraph_recompute_for_eager
    ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
  set_tests_properties(test_dygraph_recompute_for_eager PROPERTIES RUN_SERIAL 1)
endif()
if(WITH_NCCL OR WITH_RCCL)
  if(WITH_DGC)
    if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
      bash_test_modules(
        test_dist_mnist_dgc_nccl
        START_BASH
        ../../dist_test.sh
        LABELS
        "RUN_TYPE=DIST"
        ENVS
        "PADDLE_DIST_UT_PORT=21282;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
      )
      set_tests_properties(test_dist_mnist_dgc_nccl PROPERTIES RUN_SERIAL 1)
    endif()
  endif()
endif()
if(WITH_NCCL OR WITH_RCCL)
  if(WITH_DGC)
    if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
      bash_test_modules(
        test_dist_se_resnext_dgc
        START_BASH
        ../../dist_test.sh
        LABELS
        "RUN_TYPE=DIST"
        ENVS
        "PADDLE_DIST_UT_PORT=21284;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
      )
      set_tests_properties(test_dist_se_resnext_dgc PROPERTIES RUN_SERIAL 1)
    endif()
  endif()
endif()
