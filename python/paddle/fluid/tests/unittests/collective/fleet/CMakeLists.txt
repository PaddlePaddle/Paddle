# This file is generated by ${PADDLE_ROOT}/tools/gen_ut_cmakelists.py.
# Please don't modify this file manually.
# If you need to change unittests in this file, please modify testslist.csv in the current directory
# and then run the command `python3 ${PADDLE_ROOT}/tools/gen_ut_cmakelists.py -f ${CURRENT_DIRECTORY}/testslist.csv`
set(LOCAL_ALL_ARCH ON)
set(LOCAL_ALL_PLAT ON)
if(LOCAL_ALL_ARCH AND (LINUX OR WIN32))
  py_test_modules(
    test_fleet_static_mp_layers MODULES test_fleet_static_mp_layers ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_dygraph_sharding_stage3_for_eager
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21214;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_dygraph_sharding_stage3_for_eager PROPERTIES TIMEOUT
                                                                         "350")
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_pipeline
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21222;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_pipeline PROPERTIES TIMEOUT "120")
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_static_model_parallel
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21224;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_static_model_parallel PROPERTIES TIMEOUT "240")
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_dygraph_sharding_stage2
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21228;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_dygraph_sharding_stage2 PROPERTIES TIMEOUT "200")
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_control_flow
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21230;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_control_flow PROPERTIES TIMEOUT
                                                                     "350")
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_hybrid_parallel_inference_helper
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21234;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_hybrid_parallel_inference_helper PROPERTIES TIMEOUT
                                                                        "120")
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  py_test_modules(
    test_recv_save_op MODULES test_recv_save_op ENVS
    "http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python")
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  py_test_modules(
    test_communicator_sync
    MODULES
    test_communicator_sync
    ENVS
    "FLAGS_communicator_send_queue_size=1;FLAGS_communicator_max_merge_var_num=1;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_sharding_parallel
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21242;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_sharding_parallel
                       PROPERTIES TIMEOUT "120")
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_tensor_parallel
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21244;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_tensor_parallel PROPERTIES TIMEOUT
                                                                        "200")
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_dygraph_group_sharded_api_for_eager
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21246;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_dygraph_group_sharded_api_for_eager
                       PROPERTIES TIMEOUT "120")
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_qat
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21254;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_qat PROPERTIES TIMEOUT "120")
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_unused_variables
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21248;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_unused_variables PROPERTIES TIMEOUT
                                                                         "350")
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_no_sync_gradient_check
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21250;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_no_sync_gradient_check
                       PROPERTIES TIMEOUT "60")
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_auto_parallel_parallelizer
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21264;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_auto_parallel_parallelizer PROPERTIES TIMEOUT "120")
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_ir_pass_pipeline
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=21272;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_ir_pass_pipeline PROPERTIES TIMEOUT "120")
endif()
