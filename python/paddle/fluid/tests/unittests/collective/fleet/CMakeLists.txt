# This file is generated by ${PADDLE_ROOT}/tools/gen_ut_cmakelists.py.
# Please don't modify this file manually.
# If you need to change unittests in this file, please modify testslist.csv in the current directory
# and then run the command `python3 ${PADDLE_ROOT}/tools/gen_ut_cmakelists.py -f ${CURRENT_DIRECTORY}/testslist.csv`
set(LOCAL_ALL_ARCH ON)
set(LOCAL_ALL_PLAT ON)
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND LOCAL_ALL_PLAT [])
  py_test_modules(
    test_fleet_sharding_meta_optimizer
    MODULES
    test_fleet_sharding_meta_optimizer
    ENVS
    "PADDLE_DIST_UT_PORT=20073;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_sharding_meta_optimizer
                       PROPERTIES TIMEOUT "350" RUN_SERIAL 0)
endif()
if(LOCAL_ALL_ARCH AND (LINUX OR WIN32) [])
  py_test_modules(
    test_fleet_static_mp_layers
    MODULES
    test_fleet_static_mp_layers
    ENVS
    "PADDLE_DIST_UT_PORT=20075;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_static_mp_layers PROPERTIES TIMEOUT ""
                                                              RUN_SERIAL 0)
endif()
if(WITH_DGC)
  if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT ['WITH_DGC'])
    py_test_modules(
      test_dgc_op
      MODULES
      test_dgc_op
      ENVS
      "PADDLE_DIST_UT_PORT=20077;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
    )
    set_tests_properties(test_dgc_op PROPERTIES TIMEOUT "" RUN_SERIAL 0)
  endif()
endif()
if(WITH_DGC)
  if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT ['WITH_DGC'])
    py_test_modules(
      test_dgc_optimizer
      MODULES
      test_dgc_optimizer
      ENVS
      "PADDLE_DIST_UT_PORT=20079;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
    )
    set_tests_properties(test_dgc_optimizer PROPERTIES TIMEOUT "" RUN_SERIAL 0)
  endif()
endif()
if(WITH_NCCL)
  if((WITH_GPU) AND LOCAL_ALL_PLAT)
    bash_test_modules(
      test_parallel_margin_cross_entropy
      START_BASH
      ../../dist_test.sh
      LABELS
      "RUN_TYPE=DIST"
      ENVS
      "PADDLE_DIST_UT_PORT=20081;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
    )
    set_tests_properties(test_parallel_margin_cross_entropy
                         PROPERTIES TIMEOUT "120" RUN_SERIAL 0)
  endif()
endif()
if(WITH_NCCL)
  if((WITH_GPU) AND LOCAL_ALL_PLAT)
    bash_test_modules(
      test_dygraph_sharding_stage3
      START_BASH
      ../../dist_test.sh
      LABELS
      "RUN_TYPE=DIST"
      ENVS
      "PADDLE_DIST_UT_PORT=20083;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
    )
    set_tests_properties(test_dygraph_sharding_stage3 PROPERTIES TIMEOUT "350"
                                                                 RUN_SERIAL 0)
  endif()
endif()
if(WITH_NCCL)
  if(${NCCL_VERSION} VERSION_GREATER_EQUAL 2212)
    if((WITH_GPU) AND LOCAL_ALL_PLAT)
      bash_test_modules(
        test_parallel_dygraph_transformer
        START_BASH
        ../../dist_test.sh
        LABELS
        "RUN_TYPE=DIST"
        ENVS
        "PADDLE_DIST_UT_PORT=20085;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
      )
      set_tests_properties(test_parallel_dygraph_transformer
                           PROPERTIES TIMEOUT "" RUN_SERIAL 0)
    endif()
  endif()
endif()
if((WITH_ROCM) AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_transformer
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20085;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_transformer
                       PROPERTIES TIMEOUT "" RUN_SERIAL 0)
endif()
if(LOCAL_ALL_ARCH AND (LINUX OR WIN32) [])
  py_test_modules(
    test_fleet_fp16_allreduce_meta_optimizer
    MODULES
    test_fleet_fp16_allreduce_meta_optimizer
    ENVS
    "PADDLE_DIST_UT_PORT=20087;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_fp16_allreduce_meta_optimizer
                       PROPERTIES TIMEOUT "" RUN_SERIAL 0)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_rnn_dp
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20089;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_rnn_dp PROPERTIES TIMEOUT "" RUN_SERIAL 0)
endif()
if(WITH_NCCL)
  if((WITH_GPU) AND LOCAL_ALL_PLAT)
    bash_test_modules(
      test_parallel_dygraph_mp_layers
      START_BASH
      ../../dist_test.sh
      LABELS
      "RUN_TYPE=DIST"
      ENVS
      "PADDLE_DIST_UT_PORT=20091;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
    )
    set_tests_properties(test_parallel_dygraph_mp_layers
                         PROPERTIES TIMEOUT "120" RUN_SERIAL 0)
  endif()
endif()
if(LOCAL_ALL_ARCH AND (LINUX OR APPLE))
  bash_test_modules(
    test_tcp_store
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20093;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_tcp_store PROPERTIES TIMEOUT "" RUN_SERIAL 0)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_dygraph_sharding_stage3_for_eager
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20095;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_dygraph_sharding_stage3_for_eager
                       PROPERTIES TIMEOUT "350" RUN_SERIAL 0)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_fleet_graph_execution_meta_optimizer
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20097;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_graph_execution_meta_optimizer
                       PROPERTIES TIMEOUT "" RUN_SERIAL 0)
endif()
if(WITH_NCCL)
  if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT ['WITH_NCCL'])
    py_test_modules(
      test_communicator_half_async
      MODULES
      test_communicator_half_async
      ENVS
      "PADDLE_DIST_UT_PORT=20099;FLAGS_communicator_send_queue_size=1;FLAGS_communicator_max_merge_var_num=1;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
    )
    set_tests_properties(test_communicator_half_async PROPERTIES TIMEOUT "120"
                                                                 RUN_SERIAL 0)
  endif()
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND LOCAL_ALL_PLAT [])
  py_test_modules(
    test_fleet_graph_executor
    MODULES
    test_fleet_graph_executor
    ENVS
    "PADDLE_DIST_UT_PORT=20101;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_graph_executor PROPERTIES TIMEOUT ""
                                                            RUN_SERIAL 0)
endif()
if((WITH_GPU) AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_pipeline_parallel
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20103;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_pipeline_parallel
                       PROPERTIES TIMEOUT "500" RUN_SERIAL 0)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND (LINUX) [])
  py_test_modules(
    test_fleet_localsgd_meta_optimizer
    MODULES
    test_fleet_localsgd_meta_optimizer
    ENVS
    "PADDLE_DIST_UT_PORT=20105;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_localsgd_meta_optimizer
                       PROPERTIES TIMEOUT "" RUN_SERIAL 0)
endif()
if(WITH_NCCL)
  if((WITH_GPU) AND LOCAL_ALL_PLAT)
    bash_test_modules(
      test_parallel_class_center_sample
      START_BASH
      ../../dist_test.sh
      LABELS
      "RUN_TYPE=DIST"
      ENVS
      "PADDLE_DIST_UT_PORT=20107;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
    )
    set_tests_properties(test_parallel_class_center_sample
                         PROPERTIES TIMEOUT "120" RUN_SERIAL 0)
  endif()
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_pipeline
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20109;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_pipeline PROPERTIES TIMEOUT "120" RUN_SERIAL 0)
endif()
if(LOCAL_ALL_ARCH AND (LINUX OR APPLE) [])
  py_test_modules(
    test_fleet_utils
    MODULES
    test_fleet_utils
    ENVS
    "PADDLE_DIST_UT_PORT=20111;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_utils PROPERTIES TIMEOUT "120" RUN_SERIAL 0)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_static_model_parallel
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20113;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_static_model_parallel PROPERTIES TIMEOUT "240"
                                                             RUN_SERIAL 0)
endif()
if(WITH_NCCL)
  if((WITH_GPU) AND LOCAL_ALL_PLAT)
    bash_test_modules(
      test_parallel_dygraph_no_sync
      START_BASH
      ../../dist_test.sh
      LABELS
      "RUN_TYPE=DIST"
      ENVS
      "PADDLE_DIST_UT_PORT=20115;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
    )
    set_tests_properties(test_parallel_dygraph_no_sync PROPERTIES TIMEOUT "300"
                                                                  RUN_SERIAL 0)
  endif()
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_dygraph_sharding_stage2
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20117;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_dygraph_sharding_stage2 PROPERTIES TIMEOUT "200"
                                                               RUN_SERIAL 0)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_control_flow
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20119;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_control_flow
                       PROPERTIES TIMEOUT "350" RUN_SERIAL 0)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_fleet_lars_meta_optimizer
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20121;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_lars_meta_optimizer PROPERTIES TIMEOUT ""
                                                                 RUN_SERIAL 0)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_hybrid_parallel_inference_helper
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20123;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_hybrid_parallel_inference_helper
                       PROPERTIES TIMEOUT "120" RUN_SERIAL 0)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT [])
  py_test_modules(
    test_fleet_rolemaker_new
    MODULES
    test_fleet_rolemaker_new
    ENVS
    "PADDLE_DIST_UT_PORT=20127;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_rolemaker_new PROPERTIES TIMEOUT ""
                                                           RUN_SERIAL 0)
endif()
if((WITH_GPU OR WITH_ROCM) AND (LINUX OR WIN32) [])
  py_test_modules(
    test_dist_mnist_gradient_merge
    MODULES
    test_dist_mnist_gradient_merge
    ENVS
    "PADDLE_DIST_UT_PORT=20129;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_dist_mnist_gradient_merge PROPERTIES TIMEOUT "360"
                                                                 RUN_SERIAL 0)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT [])
  py_test_modules(
    test_recv_save_op
    MODULES
    test_recv_save_op
    ENVS
    "PADDLE_DIST_UT_PORT=20131;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_recv_save_op PROPERTIES TIMEOUT "" RUN_SERIAL 0)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT [])
  py_test_modules(
    test_communicator_sync
    MODULES
    test_communicator_sync
    ENVS
    "PADDLE_DIST_UT_PORT=20133;FLAGS_communicator_send_queue_size=1;FLAGS_communicator_max_merge_var_num=1;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_communicator_sync PROPERTIES TIMEOUT "" RUN_SERIAL
                                                         0)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_fleet_pipeline_meta_optimizer
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20135;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_pipeline_meta_optimizer
                       PROPERTIES TIMEOUT "" RUN_SERIAL 0)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND LOCAL_ALL_PLAT [])
  py_test_modules(
    test_fleet_gradient_merge_meta_optimizer
    MODULES
    test_fleet_gradient_merge_meta_optimizer
    ENVS
    "PADDLE_DIST_UT_PORT=20137;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_gradient_merge_meta_optimizer
                       PROPERTIES TIMEOUT "" RUN_SERIAL 0)
endif()
if(LOCAL_ALL_ARCH AND (LINUX OR WIN32) [])
  py_test_modules(
    test_fleet_amp_init
    MODULES
    test_fleet_amp_init
    ENVS
    "PADDLE_DIST_UT_PORT=20139;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_amp_init PROPERTIES TIMEOUT "" RUN_SERIAL 0)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_dygraph_sharding_optimizer_stage2
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20141;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_dygraph_sharding_optimizer_stage2
                       PROPERTIES TIMEOUT "120" RUN_SERIAL 0)
endif()
if(LOCAL_ALL_ARCH AND (LINUX OR WIN32) [])
  py_test_modules(
    test_fleet_meta_optimizer_base
    MODULES
    test_fleet_meta_optimizer_base
    ENVS
    "PADDLE_DIST_UT_PORT=20143;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_meta_optimizer_base PROPERTIES TIMEOUT ""
                                                                 RUN_SERIAL 0)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_fleet_raw_program_meta_optimizer
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20145;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_raw_program_meta_optimizer
                       PROPERTIES TIMEOUT "" RUN_SERIAL 0)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_sharding_parallel
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20147;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_sharding_parallel
                       PROPERTIES TIMEOUT "120" RUN_SERIAL 0)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_tensor_parallel
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20149;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_tensor_parallel
                       PROPERTIES TIMEOUT "200" RUN_SERIAL 0)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_dygraph_group_sharded_api_for_eager
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20151;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_dygraph_group_sharded_api_for_eager
                       PROPERTIES TIMEOUT "120" RUN_SERIAL 0)
endif()
if(LOCAL_ALL_ARCH AND (LINUX OR WIN32) [])
  py_test_modules(
    test_fleet_distributed_strategy
    MODULES
    test_fleet_distributed_strategy
    ENVS
    "PADDLE_DIST_UT_PORT=20153;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_distributed_strategy PROPERTIES TIMEOUT ""
                                                                  RUN_SERIAL 0)
endif()
if(WITH_DGC)
  if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT ['WITH_DGC'])
    py_test_modules(
      test_fleet_dgc_meta_optimizer
      MODULES
      test_fleet_dgc_meta_optimizer
      ENVS
      "PADDLE_DIST_UT_PORT=20155;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
    )
    set_tests_properties(test_fleet_dgc_meta_optimizer PROPERTIES TIMEOUT ""
                                                                  RUN_SERIAL 0)
  endif()
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_unused_variables
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20157;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_unused_variables
                       PROPERTIES TIMEOUT "350" RUN_SERIAL 0)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND (LINUX) [])
  py_test_modules(
    test_fleet_lamb_meta_optimizer
    MODULES
    test_fleet_lamb_meta_optimizer
    ENVS
    "PADDLE_DIST_UT_PORT=20159;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_lamb_meta_optimizer PROPERTIES TIMEOUT ""
                                                                 RUN_SERIAL 0)
endif()
if(WITH_DGC)
  if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT ['WITH_DGC'])
    py_test_modules(
      test_dgc_momentum_op
      MODULES
      test_dgc_momentum_op
      ENVS
      "PADDLE_DIST_UT_PORT=20161;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
    )
    set_tests_properties(test_dgc_momentum_op PROPERTIES TIMEOUT "" RUN_SERIAL
                                                         0)
  endif()
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_no_sync_gradient_check
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20163;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_no_sync_gradient_check
                       PROPERTIES TIMEOUT "60" RUN_SERIAL 0)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_fleet_pipeline_meta_optimizer_with_recompute
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20165;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_pipeline_meta_optimizer_with_recompute
                       PROPERTIES TIMEOUT "" RUN_SERIAL 0)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND (WIN32 OR LINUX) [])
  py_test_modules(
    test_fleet_hybrid_meta_optimizer
    MODULES
    test_fleet_hybrid_meta_optimizer
    ENVS
    "PADDLE_DIST_UT_PORT=20167;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_hybrid_meta_optimizer PROPERTIES TIMEOUT ""
                                                                   RUN_SERIAL 0)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_qat
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20169;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_qat PROPERTIES TIMEOUT "120"
                                                            RUN_SERIAL 0)
endif()
if(WITH_NCCL)
  if((${NCCL_VERSION} VERSION_GREATER_EQUAL 2212))
    if((WITH_GPU) AND LOCAL_ALL_PLAT)
      bash_test_modules(
        test_parallel_dygraph_sparse_embedding
        START_BASH
        ../../dist_test.sh
        LABELS
        "RUN_TYPE=DIST"
        ENVS
        "PADDLE_DIST_UT_PORT=20171;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
      )
      set_tests_properties(test_parallel_dygraph_sparse_embedding
                           PROPERTIES TIMEOUT "200" RUN_SERIAL 0)
    endif()
  endif()
endif()
if((WITH_ROCM) AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_sparse_embedding
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20171;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_sparse_embedding
                       PROPERTIES TIMEOUT "200" RUN_SERIAL 0)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND LOCAL_ALL_PLAT [])
  py_test_modules(
    test_fleet_amp_meta_optimizer
    MODULES
    test_fleet_amp_meta_optimizer
    ENVS
    "PADDLE_DIST_UT_PORT=20173;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_amp_meta_optimizer PROPERTIES TIMEOUT ""
                                                                RUN_SERIAL 0)
endif()
if(WITH_NCCL)
  if((${NCCL_VERSION} VERSION_GREATER_EQUAL 2212))
    if((WITH_GPU) AND LOCAL_ALL_PLAT)
      bash_test_modules(
        test_parallel_dygraph_sparse_embedding_over_height
        START_BASH
        ../../dist_test.sh
        LABELS
        "RUN_TYPE=DIST"
        ENVS
        "PADDLE_DIST_UT_PORT=20175;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
      )
      set_tests_properties(test_parallel_dygraph_sparse_embedding_over_height
                           PROPERTIES TIMEOUT "150" RUN_SERIAL 0)
    endif()
  endif()
endif()
if((WITH_ROCM) AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_parallel_dygraph_sparse_embedding_over_height
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20175;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_parallel_dygraph_sparse_embedding_over_height
                       PROPERTIES TIMEOUT "350" RUN_SERIAL 0)
endif()
if(LOCAL_ALL_ARCH AND (LINUX OR APPLE) [])
  py_test_modules(
    test_distributed_strategy
    MODULES
    test_distributed_strategy
    ENVS
    "PADDLE_DIST_UT_PORT=20177;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_distributed_strategy PROPERTIES TIMEOUT ""
                                                            RUN_SERIAL 0)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_auto_parallel_parallelizer
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20179;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_auto_parallel_parallelizer PROPERTIES TIMEOUT "120"
                                                                  RUN_SERIAL 0)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND (LINUX OR WIN32) [])
  py_test_modules(
    test_fleet_recompute_meta_optimizer
    MODULES
    test_fleet_recompute_meta_optimizer
    ENVS
    "PADDLE_DIST_UT_PORT=20181;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_recompute_meta_optimizer
                       PROPERTIES TIMEOUT "" RUN_SERIAL 0)
endif()
if(LOCAL_ALL_ARCH AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_dygraph_group_sharded_api
    START_BASH
    ../../dist_test.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20183;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_dygraph_group_sharded_api PROPERTIES TIMEOUT "120"
                                                                 RUN_SERIAL 0)
endif()
if(LOCAL_ALL_ARCH AND (LINUX OR WIN32) [])
  py_test_modules(
    test_fleet_private_function
    MODULES
    test_fleet_private_function
    ENVS
    "PADDLE_DIST_UT_PORT=20185;http_proxy=;https_proxy=;PYTHONPATH=../..:${PADDLE_BINARY_DIR}/python"
  )
  set_tests_properties(test_fleet_private_function PROPERTIES TIMEOUT ""
                                                              RUN_SERIAL 0)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND LOCAL_ALL_PLAT)
  bash_test_modules(
    test_new_group
    START_BASH
    test_new_group.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20187;http_proxy=;https_proxy=")
  set_tests_properties(test_new_group PROPERTIES TIMEOUT "" RUN_SERIAL 0)
endif()
if((WITH_GPU
    OR WITH_XPU
    OR WITH_ASCEND
    OR WITH_ASCEND_CL
   )
   AND (LINUX))
  bash_test_modules(
    test_c_comm_init_op
    START_BASH
    test_c_comm_init_op.sh
    LABELS
    "RUN_TYPE=DIST"
    ENVS
    "PADDLE_DIST_UT_PORT=20189;http_proxy=;https_proxy=")
  set_tests_properties(test_c_comm_init_op PROPERTIES TIMEOUT "120" RUN_SERIAL
                                                      0)
endif()
